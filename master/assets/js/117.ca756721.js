(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{921:function(e,l,c){"use strict";c.r(l);var d=c(1),g=Object(d.a)({},(function(){var e=this,l=e.$createElement,c=e._self._c||l;return c("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[c("h1",{attrs:{id:"msg-services"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#msg-services"}},[e._v("#")]),e._v(" "),c("code",[e._v("Msg")]),e._v(" Services")]),e._v(" "),c("p",{attrs:{synopsis:""}},[e._v("A "),c("code",[e._v("Msg")]),e._v(" Service processes "),c("RouterLink",{attrs:{to:"/building-modules/messages-and-queries.html#messages"}},[e._v("messages")]),e._v(". "),c("code",[e._v("Msg")]),e._v(" Services are specific to the module in which they are defined, and only process messages defined within the said module. They are called from "),c("code",[e._v("BaseApp")]),e._v(" during "),c("RouterLink",{attrs:{to:"/core/baseapp.html#delivertx"}},[c("code",[e._v("DeliverTx")])]),e._v(".")],1),e._v(" "),c("h2",{attrs:{id:"pre-requisite-readings"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisite-readings"}},[e._v("#")]),e._v(" Pre-requisite Readings")]),e._v(" "),c("ul",[c("li",{attrs:{prereq:""}},[c("RouterLink",{attrs:{to:"/building-modules/module-manager.html"}},[e._v("Module Manager")])],1),e._v(" "),c("li",{attrs:{prereq:""}},[c("RouterLink",{attrs:{to:"/building-modules/messages-and-queries.html"}},[e._v("Messages and Queries")])],1)]),e._v(" "),c("h2",{attrs:{id:"implementation-of-a-module-msg-service"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#implementation-of-a-module-msg-service"}},[e._v("#")]),e._v(" Implementation of a module "),c("code",[e._v("Msg")]),e._v(" service")]),e._v(" "),c("p",[e._v("All "),c("code",[e._v("Msg")]),e._v(" processing is done by a "),c("RouterLink",{attrs:{to:"/building-modules/messages-and-queries.html#msg-services"}},[c("code",[e._v("Msg")])]),e._v(" protobuf service. Each module should define a "),c("code",[e._v("Msg")]),e._v(" service, which will be responsible for request and response serialization.")],1),e._v(" "),c("p",[e._v("As further described in "),c("RouterLink",{attrs:{to:"/architecture/adr-031-msg-service.html"}},[e._v("ADR 031")]),e._v(", this approach has the advantage of clearly specifying return types and generating server and client code.")],1),e._v(" "),c("p",[e._v("Based on the definition of the "),c("code",[e._v("Msg")]),e._v(" service, Protobuf generates a "),c("code",[e._v("MsgServer")]),e._v(" interface. It is the role of the module developer to implement this interface, by implementing the state transition logic that should happen upon receival of each "),c("code",[e._v("Msg")]),e._v(". As an example, here is the generated "),c("code",[e._v("MsgServer")]),e._v(" interface for "),c("code",[e._v("x/bank")]),e._v(", which exposes two "),c("code",[e._v("Msg")]),e._v("s:")]),e._v(" "),c("p",[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gTXNnU2VydmVyIGlzIHRoZSBzZXJ2ZXIgQVBJIGZvciBNc2cgc2VydmljZS4KdHlwZSBNc2dTZXJ2ZXIgaW50ZXJmYWNlIHsKCS8vIFNlbmQgZGVmaW5lcyBhIG1ldGhvZCBmb3Igc2VuZGluZyBjb2lucyBmcm9tIG9uZSBhY2NvdW50IHRvIGFub3RoZXIgYWNjb3VudC4KCVNlbmQoY29udGV4dC5Db250ZXh0LCAqTXNnU2VuZCkgKCpNc2dTZW5kUmVzcG9uc2UsIGVycm9yKQoJLy8gTXVsdGlTZW5kIGRlZmluZXMgYSBtZXRob2QgZm9yIHNlbmRpbmcgY29pbnMgZnJvbSBzb21lIGFjY291bnRzIHRvIG90aGVyIGFjY291bnRzLgoJTXVsdGlTZW5kKGNvbnRleHQuQ29udGV4dCwgKk1zZ011bHRpU2VuZCkgKCpNc2dNdWx0aVNlbmRSZXNwb25zZSwgZXJyb3IpCn0="}})],1),e._v(" "),c("p",[e._v("When possible, the existing module's "),c("RouterLink",{attrs:{to:"/building-modules/keeper.html"}},[c("code",[e._v("Keeper")])]),e._v(" should implement "),c("code",[e._v("MsgServer")]),e._v(", otherwise a "),c("code",[e._v("msgServer")]),e._v(" struct that embeds the "),c("code",[e._v("Keeper")]),e._v(" can be created, typically in "),c("code",[e._v("./keeper/msg_server.go")]),e._v(":")],1),e._v(" "),c("p",[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBtc2dTZXJ2ZXIgc3RydWN0IHsKCUtlZXBlcgp9"}})],1),e._v(" "),c("p",[c("code",[e._v("msgServer")]),e._v(" methods can retrieve the "),c("code",[e._v("sdk.Context")]),e._v(" from the "),c("code",[e._v("context.Context")]),e._v(" parameter method using the "),c("code",[e._v("sdk.UnwrapSDKContext")]),e._v(":")]),e._v(" "),c("p",[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCgkmcXVvdDtjb250ZXh0JnF1b3Q7CgoJJnF1b3Q7Z2l0aHViLmNvbS9hcm1vbi9nby1tZXRyaWNzJnF1b3Q7CgoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90ZWxlbWV0cnkmcXVvdDsKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CglzZGtlcnJvcnMgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcy9lcnJvcnMmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsveC9iYW5rL3R5cGVzJnF1b3Q7CikKCnR5cGUgbXNnU2VydmVyIHN0cnVjdCB7CglLZWVwZXIKfQoKLy8gTmV3TXNnU2VydmVySW1wbCByZXR1cm5zIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBiYW5rIE1zZ1NlcnZlciBpbnRlcmZhY2UKLy8gZm9yIHRoZSBwcm92aWRlZCBLZWVwZXIuCmZ1bmMgTmV3TXNnU2VydmVySW1wbChrZWVwZXIgS2VlcGVyKSB0eXBlcy5Nc2dTZXJ2ZXIgewoJcmV0dXJuICZhbXA7bXNnU2VydmVye0tlZXBlcjoga2VlcGVyfQp9Cgp2YXIgXyB0eXBlcy5Nc2dTZXJ2ZXIgPSBtc2dTZXJ2ZXJ7fQoKZnVuYyAoayBtc2dTZXJ2ZXIpIFNlbmQoZ29DdHggY29udGV4dC5Db250ZXh0LCBtc2cgKnR5cGVzLk1zZ1NlbmQpICgqdHlwZXMuTXNnU2VuZFJlc3BvbnNlLCBlcnJvcikgewoJY3R4IDo9IHNkay5VbndyYXBTREtDb250ZXh0KGdvQ3R4KQoKCWlmIGVyciA6PSBrLlNlbmRFbmFibGVkQ29pbnMoY3R4LCBtc2cuQW1vdW50Li4uKTsgZXJyICE9IG5pbCB7CgkJcmV0dXJuIG5pbCwgZXJyCgl9CgoJZnJvbSwgZXJyIDo9IHNkay5BY2NBZGRyZXNzRnJvbUJlY2gzMihtc2cuRnJvbUFkZHJlc3MpCglpZiBlcnIgIT0gbmlsIHsKCQlyZXR1cm4gbmlsLCBlcnIKCX0KCXRvLCBlcnIgOj0gc2RrLkFjY0FkZHJlc3NGcm9tQmVjaDMyKG1zZy5Ub0FkZHJlc3MpCglpZiBlcnIgIT0gbmlsIHsKCQlyZXR1cm4gbmlsLCBlcnIKCX0KCglpZiBrLkJsb2NrZWRBZGRyKHRvKSB7CgkJcmV0dXJuIG5pbCwgc2RrZXJyb3JzLldyYXBmKHNka2Vycm9ycy5FcnJVbmF1dGhvcml6ZWQsICZxdW90OyVzIGlzIG5vdCBhbGxvd2VkIHRvIHJlY2VpdmUgZnVuZHMmcXVvdDssIG1zZy5Ub0FkZHJlc3MpCgl9CgoJZXJyID0gay5TZW5kQ29pbnMoY3R4LCBmcm9tLCB0bywgbXNnLkFtb3VudCkKCWlmIGVyciAhPSBuaWwgewoJCXJldHVybiBuaWwsIGVycgoJfQoKCWRlZmVyIGZ1bmMoKSB7CgkJZm9yIF8sIGEgOj0gcmFuZ2UgbXNnLkFtb3VudCB7CgkJCXRlbGVtZXRyeS5TZXRHYXVnZVdpdGhMYWJlbHMoCgkJCQlbXXN0cmluZ3smcXVvdDt0eCZxdW90OywgJnF1b3Q7bXNnJnF1b3Q7LCAmcXVvdDtzZW5kJnF1b3Q7fSwKCQkJCWZsb2F0MzIoYS5BbW91bnQuSW50NjQoKSksCgkJCQlbXW1ldHJpY3MuTGFiZWx7dGVsZW1ldHJ5Lk5ld0xhYmVsKCZxdW90O2Rlbm9tJnF1b3Q7LCBhLkRlbm9tKX0sCgkJCSkKCQl9Cgl9KCkKCgljdHguRXZlbnRNYW5hZ2VyKCkuRW1pdEV2ZW50KAoJCXNkay5OZXdFdmVudCgKCQkJc2RrLkV2ZW50VHlwZU1lc3NhZ2UsCgkJCXNkay5OZXdBdHRyaWJ1dGUoc2RrLkF0dHJpYnV0ZUtleU1vZHVsZSwgdHlwZXMuQXR0cmlidXRlVmFsdWVDYXRlZ29yeSksCgkJKSwKCSkKCglyZXR1cm4gJmFtcDt0eXBlcy5Nc2dTZW5kUmVzcG9uc2V7fSwgbmlsCn0KCmZ1bmMgKGsgbXNnU2VydmVyKSBNdWx0aVNlbmQoZ29DdHggY29udGV4dC5Db250ZXh0LCBtc2cgKnR5cGVzLk1zZ011bHRpU2VuZCkgKCp0eXBlcy5Nc2dNdWx0aVNlbmRSZXNwb25zZSwgZXJyb3IpIHsKCWN0eCA6PSBzZGsuVW53cmFwU0RLQ29udGV4dChnb0N0eCkKCgkvLyBOT1RFOiB0b3RhbEluID09IHRvdGFsT3V0IHNob3VsZCBhbHJlYWR5IGhhdmUgYmVlbiBjaGVja2VkCglmb3IgXywgaW4gOj0gcmFuZ2UgbXNnLklucHV0cyB7CgkJaWYgZXJyIDo9IGsuU2VuZEVuYWJsZWRDb2lucyhjdHgsIGluLkNvaW5zLi4uKTsgZXJyICE9IG5pbCB7CgkJCXJldHVybiBuaWwsIGVycgoJCX0KCX0KCglmb3IgXywgb3V0IDo9IHJhbmdlIG1zZy5PdXRwdXRzIHsKCQlhY2NBZGRyLCBlcnIgOj0gc2RrLkFjY0FkZHJlc3NGcm9tQmVjaDMyKG91dC5BZGRyZXNzKQoJCWlmIGVyciAhPSBuaWwgewoJCQlwYW5pYyhlcnIpCgkJfQoJCWlmIGsuQmxvY2tlZEFkZHIoYWNjQWRkcikgewoJCQlyZXR1cm4gbmlsLCBzZGtlcnJvcnMuV3JhcGYoc2RrZXJyb3JzLkVyclVuYXV0aG9yaXplZCwgJnF1b3Q7JXMgaXMgbm90IGFsbG93ZWQgdG8gcmVjZWl2ZSB0cmFuc2FjdGlvbnMmcXVvdDssIG91dC5BZGRyZXNzKQoJCX0KCX0KCgllcnIgOj0gay5JbnB1dE91dHB1dENvaW5zKGN0eCwgbXNnLklucHV0cywgbXNnLk91dHB1dHMpCglpZiBlcnIgIT0gbmlsIHsKCQlyZXR1cm4gbmlsLCBlcnIKCX0KCgljdHguRXZlbnRNYW5hZ2VyKCkuRW1pdEV2ZW50KAoJCXNkay5OZXdFdmVudCgKCQkJc2RrLkV2ZW50VHlwZU1lc3NhZ2UsCgkJCXNkay5OZXdBdHRyaWJ1dGUoc2RrLkF0dHJpYnV0ZUtleU1vZHVsZSwgdHlwZXMuQXR0cmlidXRlVmFsdWVDYXRlZ29yeSksCgkJKSwKCSkKCglyZXR1cm4gJmFtcDt0eXBlcy5Nc2dNdWx0aVNlbmRSZXNwb25zZXt9LCBuaWwKfQo="}})],1),e._v(" "),c("p",[c("code",[e._v("Msg")]),e._v(" processing usually follows these 2 steps:")]),e._v(" "),c("ul",[c("li",[e._v("First, they perform "),c("em",[e._v("stateful")]),e._v(" checks to make sure the "),c("code",[e._v("message")]),e._v(" is valid. At this stage, the "),c("code",[e._v("message")]),e._v("'s "),c("code",[e._v("ValidateBasic()")]),e._v(" method has already been called, meaning "),c("em",[e._v("stateless")]),e._v(" checks on the message (like making sure parameters are correctly formatted) have already been performed. Checks performed in the "),c("code",[e._v("msgServer")]),e._v(" method can be more expensive and require access to the state. For example, a "),c("code",[e._v("msgServer")]),e._v(" method for a "),c("code",[e._v("transfer")]),e._v(" message might check that the sending account has enough funds to actually perform the transfer. To access the state, the "),c("code",[e._v("msgServer")]),e._v(" method needs to call the "),c("RouterLink",{attrs:{to:"/building-modules/keeper.html"}},[c("code",[e._v("keeper")]),e._v("'s")]),e._v(" getter functions.")],1),e._v(" "),c("li",[e._v("Then, if the checks are successful, the "),c("code",[e._v("msgServer")]),e._v(" method calls the "),c("RouterLink",{attrs:{to:"/building-modules/keeper.html"}},[c("code",[e._v("keeper")]),e._v("'s")]),e._v(" setter functions to actually perform the state transition.")],1)]),e._v(" "),c("p",[e._v("Before returning, "),c("code",[e._v("msgServer")]),e._v(" methods generally emit one or more "),c("RouterLink",{attrs:{to:"/core/events.html"}},[e._v("events")]),e._v(" via the "),c("code",[e._v("EventManager")]),e._v(" held in the "),c("code",[e._v("ctx")]),e._v(":")],1),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Y3R4LkV2ZW50TWFuYWdlcigpLkVtaXRFdmVudCgKCQlzZGsuTmV3RXZlbnQoCgkJCWV2ZW50VHlwZSwgIC8vIGUuZy4gc2RrLkV2ZW50VHlwZU1lc3NhZ2UgZm9yIGEgbWVzc2FnZSwgdHlwZXMuQ3VzdG9tRXZlbnRUeXBlIGZvciBhIGN1c3RvbSBldmVudCBkZWZpbmVkIGluIHRoZSBtb2R1bGUKCQkJc2RrLk5ld0F0dHJpYnV0ZShhdHRyaWJ1dGVLZXksIGF0dHJpYnV0ZVZhbHVlKSwKCQkpLAogICAgKQo="}}),e._v(" "),c("p",[e._v("These events are relayed back to the underlying consensus engine and can be used by service providers to implement services around the application. Click "),c("RouterLink",{attrs:{to:"/core/events.html"}},[e._v("here")]),e._v(" to learn more about events.")],1),e._v(" "),c("p",[e._v("The invoked "),c("code",[e._v("msgServer")]),e._v(" method returns a "),c("code",[e._v("proto.Message")]),e._v(" response and an "),c("code",[e._v("error")]),e._v(". These return values are then wrapped into an "),c("code",[e._v("*sdk.Result")]),e._v(" or an "),c("code",[e._v("error")]),e._v(" using "),c("code",[e._v("sdk.WrapServiceResult(ctx sdk.Context, res proto.Message, err error)")]),e._v(":")]),e._v(" "),c("p",[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBiYXNlYXBwCgppbXBvcnQgKAoJJnF1b3Q7Y29udGV4dCZxdW90OwoJJnF1b3Q7Zm10JnF1b3Q7CgoJZ29nb2dycGMgJnF1b3Q7Z2l0aHViLmNvbS9nb2dvL3Byb3RvYnVmL2dycGMmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vZ29nby9wcm90b2J1Zi9wcm90byZxdW90OwoJJnF1b3Q7Z29vZ2xlLmdvbGFuZy5vcmcvZ3JwYyZxdW90OwoKCWNvZGVjdHlwZXMgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay9jb2RlYy90eXBlcyZxdW90OwoJc2RrICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdHlwZXMmcXVvdDsKCXNka2Vycm9ycyAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzL2Vycm9ycyZxdW90OwopCgovLyBNc2dTZXJ2aWNlUm91dGVyIHJvdXRlcyBmdWxseS1xdWFsaWZpZWQgTXNnIHNlcnZpY2UgbWV0aG9kcyB0byB0aGVpciBoYW5kbGVyLgp0eXBlIE1zZ1NlcnZpY2VSb3V0ZXIgc3RydWN0IHsKCWludGVyZmFjZVJlZ2lzdHJ5IGNvZGVjdHlwZXMuSW50ZXJmYWNlUmVnaXN0cnkKCXJvdXRlcyAgICAgICAgICAgIG1hcFtzdHJpbmddTXNnU2VydmljZUhhbmRsZXIKfQoKdmFyIF8gZ29nb2dycGMuU2VydmVyID0gJmFtcDtNc2dTZXJ2aWNlUm91dGVye30KCi8vIE5ld01zZ1NlcnZpY2VSb3V0ZXIgY3JlYXRlcyBhIG5ldyBNc2dTZXJ2aWNlUm91dGVyLgpmdW5jIE5ld01zZ1NlcnZpY2VSb3V0ZXIoKSAqTXNnU2VydmljZVJvdXRlciB7CglyZXR1cm4gJmFtcDtNc2dTZXJ2aWNlUm91dGVyewoJCXJvdXRlczogbWFwW3N0cmluZ11Nc2dTZXJ2aWNlSGFuZGxlcnt9LAoJfQp9CgovLyBNc2dTZXJ2aWNlSGFuZGxlciBkZWZpbmVzIGEgZnVuY3Rpb24gdHlwZSB3aGljaCBoYW5kbGVzIE1zZyBzZXJ2aWNlIG1lc3NhZ2UuCnR5cGUgTXNnU2VydmljZUhhbmRsZXIgPSBmdW5jKGN0eCBzZGsuQ29udGV4dCwgcmVxIHNkay5Nc2dSZXF1ZXN0KSAoKnNkay5SZXN1bHQsIGVycm9yKQoKLy8gSGFuZGxlciByZXR1cm5zIHRoZSBNc2dTZXJ2aWNlSGFuZGxlciBmb3IgYSBnaXZlbiBxdWVyeSByb3V0ZSBwYXRoIG9yIG5pbAovLyBpZiBub3QgZm91bmQuCmZ1bmMgKG1zciAqTXNnU2VydmljZVJvdXRlcikgSGFuZGxlcihtZXRob2ROYW1lIHN0cmluZykgTXNnU2VydmljZUhhbmRsZXIgewoJcmV0dXJuIG1zci5yb3V0ZXNbbWV0aG9kTmFtZV0KfQoKLy8gUmVnaXN0ZXJTZXJ2aWNlIGltcGxlbWVudHMgdGhlIGdSUEMgU2VydmVyLlJlZ2lzdGVyU2VydmljZSBtZXRob2QuIHNkIGlzIGEgZ1JQQwovLyBzZXJ2aWNlIGRlc2NyaXB0aW9uLCBoYW5kbGVyIGlzIGFuIG9iamVjdCB3aGljaCBpbXBsZW1lbnRzIHRoYXQgZ1JQQyBzZXJ2aWNlLgovLwovLyBUaGlzIGZ1bmN0aW9uIFBBTklDczoKLy8gLSBpZiBpdCBpcyBjYWxsZWQgYmVmb3JlIHRoZSBzZXJ2aWNlIGBNc2dgcyBoYXZlIGJlZW4gcmVnaXN0ZXJlZCB1c2luZwovLyAgIFJlZ2lzdGVySW50ZXJmYWNlcywKLy8gLSBvciBpZiBhIHNlcnZpY2UgaXMgYmVpbmcgcmVnaXN0ZXJlZCB0d2ljZS4KZnVuYyAobXNyICpNc2dTZXJ2aWNlUm91dGVyKSBSZWdpc3RlclNlcnZpY2Uoc2QgKmdycGMuU2VydmljZURlc2MsIGhhbmRsZXIgaW50ZXJmYWNle30pIHsKCS8vIEFkZHMgYSB0b3AtbGV2ZWwgcXVlcnkgaGFuZGxlciBiYXNlZCBvbiB0aGUgZ1JQQyBzZXJ2aWNlIG5hbWUuCglmb3IgXywgbWV0aG9kIDo9IHJhbmdlIHNkLk1ldGhvZHMgewoJCWZxTWV0aG9kIDo9IGZtdC5TcHJpbnRmKCZxdW90Oy8lcy8lcyZxdW90Oywgc2QuU2VydmljZU5hbWUsIG1ldGhvZC5NZXRob2ROYW1lKQoJCW1ldGhvZEhhbmRsZXIgOj0gbWV0aG9kLkhhbmRsZXIKCgkJLy8gQ2hlY2sgdGhhdCB0aGUgc2VydmljZSBNc2cgZnVsbHktcXVhbGlmaWVkIG1ldGhvZCBuYW1lIGhhcyBhbHJlYWR5CgkJLy8gYmVlbiByZWdpc3RlcmVkICh2aWEgUmVnaXN0ZXJJbnRlcmZhY2VzKS4gSWYgdGhlIHVzZXIgcmVnaXN0ZXJzIGEKCQkvLyBzZXJ2aWNlIHdpdGhvdXQgcmVnaXN0ZXJpbmcgYWNjb3JkaW5nIHNlcnZpY2UgTXNnIHR5cGUsIHRoZXJlIG1pZ2h0IGJlCgkJLy8gc29tZSB1bmV4cGVjdGVkIGJlaGF2aW9yIGRvd24gdGhlIHJvYWQuIFNpbmNlIHdlIGNhbid0IHJldHVybiBhbiBlcnJvcgoJCS8vIChgU2VydmVyLlJlZ2lzdGVyU2VydmljZWAgaW50ZXJmYWNlIHJlc3RyaWN0aW9uKSB3ZSBwYW5pYyAoYXQgc3RhcnR1cCkuCgkJc2VydmljZU1zZywgZXJyIDo9IG1zci5pbnRlcmZhY2VSZWdpc3RyeS5SZXNvbHZlKGZxTWV0aG9kKQoJCWlmIGVyciAhPSBuaWwgfHwgc2VydmljZU1zZyA9PSBuaWwgewoJCQlwYW5pYygKCQkJCWZtdC5FcnJvcmYoCgkJCQkJJnF1b3Q7dHlwZV91cmwgJXMgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0LiAmcXVvdDsrCgkJCQkJCSZxdW90O0JlZm9yZSBjYWxsaW5nIFJlZ2lzdGVyU2VydmljZSwgeW91IG11c3QgcmVnaXN0ZXIgYWxsIGludGVyZmFjZXMgYnkgY2FsbGluZyB0aGUgYFJlZ2lzdGVySW50ZXJmYWNlc2AgJnF1b3Q7KwoJCQkJCQkmcXVvdDttZXRob2Qgb24gbW9kdWxlLkJhc2ljTWFuYWdlci4gRWFjaCBtb2R1bGUgc2hvdWxkIGNhbGwgYG1zZ3NlcnZpY2UuUmVnaXN0ZXJNc2dTZXJ2aWNlRGVzY2AgaW5zaWRlIGl0cyAmcXVvdDsrCgkJCQkJCSZxdW90O2BSZWdpc3RlckludGVyZmFjZXNgIG1ldGhvZCB3aXRoIHRoZSBgX01zZ19zZXJ2aWNlRGVzY2AgZ2VuZXJhdGVkIGJ5IHByb3RvLWdlbiZxdW90OywKCQkJCQlmcU1ldGhvZCwKCQkJCSksCgkJCSkKCQl9CgoJCS8vIENoZWNrIHRoYXQgZWFjaCBzZXJ2aWNlIGlzIG9ubHkgcmVnaXN0ZXJlZCBvbmNlLiBJZiBhIHNlcnZpY2UgaXMKCQkvLyByZWdpc3RlcmVkIG1vcmUgdGhhbiBvbmNlLCB0aGVuIHdlIHNob3VsZCBlcnJvci4gU2luY2Ugd2UgY2FuJ3QKCQkvLyByZXR1cm4gYW4gZXJyb3IgKGBTZXJ2ZXIuUmVnaXN0ZXJTZXJ2aWNlYCBpbnRlcmZhY2UgcmVzdHJpY3Rpb24pIHdlCgkJLy8gcGFuaWMgKGF0IHN0YXJ0dXApLgoJCV8sIGZvdW5kIDo9IG1zci5yb3V0ZXNbZnFNZXRob2RdCgkJaWYgZm91bmQgewoJCQlwYW5pYygKCQkJCWZtdC5FcnJvcmYoCgkJCQkJJnF1b3Q7bXNnIHNlcnZpY2UgJXMgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLiBQbGVhc2UgbWFrZSBzdXJlIHRvIG9ubHkgcmVnaXN0ZXIgZWFjaCBzZXJ2aWNlIG9uY2UuICZxdW90OysKCQkJCQkJJnF1b3Q7VGhpcyB1c3VhbGx5IG1lYW5zIHRoYXQgdGhlcmUgYXJlIGNvbmZsaWN0aW5nIG1vZHVsZXMgcmVnaXN0ZXJpbmcgdGhlIHNhbWUgbXNnIHNlcnZpY2UmcXVvdDssCgkJCQkJZnFNZXRob2QsCgkJCQkpLAoJCQkpCgkJfQoKCQltc3Iucm91dGVzW2ZxTWV0aG9kXSA9IGZ1bmMoY3R4IHNkay5Db250ZXh0LCByZXEgc2RrLk1zZ1JlcXVlc3QpICgqc2RrLlJlc3VsdCwgZXJyb3IpIHsKCQkJY3R4ID0gY3R4LldpdGhFdmVudE1hbmFnZXIoc2RrLk5ld0V2ZW50TWFuYWdlcigpKQoJCQlpbnRlcmNlcHRvciA6PSBmdW5jKGdvQ3R4IGNvbnRleHQuQ29udGV4dCwgXyBpbnRlcmZhY2V7fSwgXyAqZ3JwYy5VbmFyeVNlcnZlckluZm8sIGhhbmRsZXIgZ3JwYy5VbmFyeUhhbmRsZXIpIChpbnRlcmZhY2V7fSwgZXJyb3IpIHsKCQkJCWdvQ3R4ID0gY29udGV4dC5XaXRoVmFsdWUoZ29DdHgsIHNkay5TZGtDb250ZXh0S2V5LCBjdHgpCgkJCQlyZXR1cm4gaGFuZGxlcihnb0N0eCwgcmVxKQoJCQl9CgkJCS8vIENhbGwgdGhlIG1ldGhvZCBoYW5kbGVyIGZyb20gdGhlIHNlcnZpY2UgZGVzY3JpcHRpb24gd2l0aCB0aGUgaGFuZGxlciBvYmplY3QuCgkJCS8vIFdlIGRvbid0IGRvIGFueSBkZWNvZGluZyBoZXJlIGJlY2F1c2UgdGhlIGRlY29kaW5nIHdhcyBhbHJlYWR5IGRvbmUuCgkJCXJlcywgZXJyIDo9IG1ldGhvZEhhbmRsZXIoaGFuZGxlciwgc2RrLldyYXBTREtDb250ZXh0KGN0eCksIG5vb3BEZWNvZGVyLCBpbnRlcmNlcHRvcikKCQkJaWYgZXJyICE9IG5pbCB7CgkJCQlyZXR1cm4gbmlsLCBlcnIKCQkJfQoKCQkJcmVzTXNnLCBvayA6PSByZXMuKHByb3RvLk1lc3NhZ2UpCgkJCWlmICFvayB7CgkJCQlyZXR1cm4gbmlsLCBzZGtlcnJvcnMuV3JhcGYoc2RrZXJyb3JzLkVyckludmFsaWRUeXBlLCAmcXVvdDtFeHBlY3RpbmcgcHJvdG8uTWVzc2FnZSwgZ290ICVUJnF1b3Q7LCByZXNNc2cpCgkJCX0KCgkJCXJldHVybiBzZGsuV3JhcFNlcnZpY2VSZXN1bHQoY3R4LCByZXNNc2csIGVycikKCQl9Cgl9Cn0KCi8vIFNldEludGVyZmFjZVJlZ2lzdHJ5IHNldHMgdGhlIGludGVyZmFjZSByZWdpc3RyeSBmb3IgdGhlIHJvdXRlci4KZnVuYyAobXNyICpNc2dTZXJ2aWNlUm91dGVyKSBTZXRJbnRlcmZhY2VSZWdpc3RyeShpbnRlcmZhY2VSZWdpc3RyeSBjb2RlY3R5cGVzLkludGVyZmFjZVJlZ2lzdHJ5KSB7Cgltc3IuaW50ZXJmYWNlUmVnaXN0cnkgPSBpbnRlcmZhY2VSZWdpc3RyeQp9CgpmdW5jIG5vb3BEZWNvZGVyKF8gaW50ZXJmYWNle30pIGVycm9yIHsgcmV0dXJuIG5pbCB9Cg=="}})],1),e._v(" "),c("p",[e._v("This method takes care of marshaling the "),c("code",[e._v("res")]),e._v(" parameter to protobuf and attaching any events on the "),c("code",[e._v("ctx.EventManager()")]),e._v(" to the "),c("code",[e._v("sdk.Result")]),e._v(".")]),e._v(" "),c("p",[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"false",base64:"Ly8gUmVzdWx0IGlzIHRoZSB1bmlvbiBvZiBSZXNwb25zZUZvcm1hdCBhbmQgUmVzcG9uc2VDaGVja1R4LgptZXNzYWdlIFJlc3VsdCB7CiAgb3B0aW9uIChnb2dvcHJvdG8uZ29wcm90b19nZXR0ZXJzKSA9IGZhbHNlOwoKICAvLyBEYXRhIGlzIGFueSBkYXRhIHJldHVybmVkIGZyb20gbWVzc2FnZSBvciBoYW5kbGVyIGV4ZWN1dGlvbi4gSXQgTVVTVCBiZQogIC8vIGxlbmd0aCBwcmVmaXhlZCBpbiBvcmRlciB0byBzZXBhcmF0ZSBkYXRhIGZyb20gbXVsdGlwbGUgbWVzc2FnZSBleGVjdXRpb25zLgogIGJ5dGVzIGRhdGEgPSAxOwoKICAvLyBMb2cgY29udGFpbnMgdGhlIGxvZyBpbmZvcm1hdGlvbiBmcm9tIG1lc3NhZ2Ugb3IgaGFuZGxlciBleGVjdXRpb24uCiAgc3RyaW5nIGxvZyA9IDI7CgogIC8vIEV2ZW50cyBjb250YWlucyBhIHNsaWNlIG9mIEV2ZW50IG9iamVjdHMgdGhhdCB3ZXJlIGVtaXR0ZWQgZHVyaW5nIG1lc3NhZ2UKICAvLyBvciBoYW5kbGVyIGV4ZWN1dGlvbi4KICByZXBlYXRlZCB0ZW5kZXJtaW50LmFiY2kuRXZlbnQgZXZlbnRzID0gMyBbKGdvZ29wcm90by5udWxsYWJsZSkgPSBmYWxzZV07Cn0="}})],1),e._v(" "),c("h2",{attrs:{id:"legacy-amino-msgs"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#legacy-amino-msgs"}},[e._v("#")]),e._v(" Legacy Amino "),c("code",[e._v("Msg")]),e._v("s")]),e._v(" "),c("h3",{attrs:{id:"handler-type"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#handler-type"}},[e._v("#")]),e._v(" "),c("code",[e._v("handler")]),e._v(" type")]),e._v(" "),c("p",[e._v("The "),c("code",[e._v("handler")]),e._v(" type defined in the Cosmos SDK will be deprecated in favor of "),c("a",{attrs:{href:"#implementation-of-a-module-msg-service"}},[c("code",[e._v("Msg")]),e._v(" Services")]),e._v(".")]),e._v(" "),c("p",[e._v("Here is the typical structure of a "),c("code",[e._v("handler")]),e._v(" function:")]),e._v(" "),c("p",[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKLy8gSGFuZGxlciBkZWZpbmVzIHRoZSBjb3JlIG9mIHRoZSBzdGF0ZSB0cmFuc2l0aW9uIGZ1bmN0aW9uIG9mIGFuIGFwcGxpY2F0aW9uLgp0eXBlIEhhbmRsZXIgZnVuYyhjdHggQ29udGV4dCwgbXNnIE1zZykgKCpSZXN1bHQsIGVycm9yKQoKLy8gQW50ZUhhbmRsZXIgYXV0aGVudGljYXRlcyB0cmFuc2FjdGlvbnMsIGJlZm9yZSB0aGVpciBpbnRlcm5hbCBtZXNzYWdlcyBhcmUgaGFuZGxlZC4KLy8gSWYgbmV3Q3R4LklzWmVybygpLCBjdHggaXMgdXNlZCBpbnN0ZWFkLgp0eXBlIEFudGVIYW5kbGVyIGZ1bmMoY3R4IENvbnRleHQsIHR4IFR4LCBzaW11bGF0ZSBib29sKSAobmV3Q3R4IENvbnRleHQsIGVyciBlcnJvcikKCi8vIEFudGVEZWNvcmF0b3Igd3JhcHMgdGhlIG5leHQgQW50ZUhhbmRsZXIgdG8gcGVyZm9ybSBjdXN0b20gcHJlLSBhbmQgcG9zdC1wcm9jZXNzaW5nLgp0eXBlIEFudGVEZWNvcmF0b3IgaW50ZXJmYWNlIHsKCUFudGVIYW5kbGUoY3R4IENvbnRleHQsIHR4IFR4LCBzaW11bGF0ZSBib29sLCBuZXh0IEFudGVIYW5kbGVyKSAobmV3Q3R4IENvbnRleHQsIGVyciBlcnJvcikKfQoKLy8gQ2hhaW5EZWNvcmF0b3IgY2hhaW5zIEFudGVEZWNvcmF0b3JzIHRvZ2V0aGVyIHdpdGggZWFjaCBBbnRlRGVjb3JhdG9yCi8vIHdyYXBwaW5nIG92ZXIgdGhlIGRlY29yYXRvcnMgZnVydGhlciBhbG9uZyBjaGFpbiBhbmQgcmV0dXJucyBhIHNpbmdsZSBBbnRlSGFuZGxlci4KLy8KLy8gTk9URTogVGhlIGZpcnN0IGVsZW1lbnQgaXMgb3V0ZXJtb3N0IGRlY29yYXRvciwgd2hpbGUgdGhlIGxhc3QgZWxlbWVudCBpcyBpbm5lcm1vc3QKLy8gZGVjb3JhdG9yLiBEZWNvcmF0b3Igb3JkZXJpbmcgaXMgY3JpdGljYWwgc2luY2Ugc29tZSBkZWNvcmF0b3JzIHdpbGwgZXhwZWN0Ci8vIGNlcnRhaW4gY2hlY2tzIGFuZCB1cGRhdGVzIHRvIGJlIHBlcmZvcm1lZCAoZS5nLiB0aGUgQ29udGV4dCkgYmVmb3JlIHRoZSBkZWNvcmF0b3IKLy8gaXMgcnVuLiBUaGVzZSBleHBlY3RhdGlvbnMgc2hvdWxkIGJlIGRvY3VtZW50ZWQgY2xlYXJseSBpbiBhIENPTlRSQUNUIGRvY2xpbmUKLy8gaW4gdGhlIGRlY29yYXRvcidzIGdvZG9jLgovLwovLyBOT1RFOiBBbnkgYXBwbGljYXRpb24gdGhhdCB1c2VzIEdhc01ldGVyIHRvIGxpbWl0IHRyYW5zYWN0aW9uIHByb2Nlc3NpbmcgY29zdAovLyBNVVNUIHNldCBHYXNNZXRlciB3aXRoIHRoZSBGSVJTVCBBbnRlRGVjb3JhdG9yLiBGYWlsaW5nIHRvIGRvIHNvIHdpbGwgY2F1c2UKLy8gdHJhbnNhY3Rpb25zIHRvIGJlIHByb2Nlc3NlZCB3aXRoIGFuIGluZmluaXRlIGdhc21ldGVyIGFuZCBvcGVuIGEgRE9TIGF0dGFjayB2ZWN0b3IuCi8vIFVzZSBgYW50ZS5TZXRVcENvbnRleHREZWNvcmF0b3JgIG9yIGEgY3VzdG9tIERlY29yYXRvciB3aXRoIHNpbWlsYXIgZnVuY3Rpb25hbGl0eS4KLy8gUmV0dXJucyBuaWwgd2hlbiBubyBBbnRlRGVjb3JhdG9yIGFyZSBzdXBwbGllZC4KZnVuYyBDaGFpbkFudGVEZWNvcmF0b3JzKGNoYWluIC4uLkFudGVEZWNvcmF0b3IpIEFudGVIYW5kbGVyIHsKCWlmIGxlbihjaGFpbikgPT0gMCB7CgkJcmV0dXJuIG5pbAoJfQoKCS8vIGhhbmRsZSBub24tdGVybWluYXRlZCBkZWNvcmF0b3JzIGNoYWluCglpZiAoY2hhaW5bbGVuKGNoYWluKS0xXSAhPSBUZXJtaW5hdG9ye30pIHsKCQljaGFpbiA9IGFwcGVuZChjaGFpbiwgVGVybWluYXRvcnt9KQoJfQoKCXJldHVybiBmdW5jKGN0eCBDb250ZXh0LCB0eCBUeCwgc2ltdWxhdGUgYm9vbCkgKENvbnRleHQsIGVycm9yKSB7CgkJcmV0dXJuIGNoYWluWzBdLkFudGVIYW5kbGUoY3R4LCB0eCwgc2ltdWxhdGUsIENoYWluQW50ZURlY29yYXRvcnMoY2hhaW5bMTpdLi4uKSkKCX0KfQoKLy8gVGVybWluYXRvciBBbnRlRGVjb3JhdG9yIHdpbGwgZ2V0IGFkZGVkIHRvIHRoZSBjaGFpbiB0byBzaW1wbGlmeSBkZWNvcmF0b3IgY29kZQovLyBEb24ndCBuZWVkIHRvIGNoZWNrIGlmIG5leHQgPT0gbmlsIGZ1cnRoZXIgdXAgdGhlIGNoYWluCi8vICAgICAgICAgICAgICAgICAgICAgICAgX19fX19fCi8vICAgICAgICAgICAgICAgICAgICAgJmx0OygoKCgoKFxcXAovLyAgICAgICAgICAgICAgICAgICAgIC8gICAgICAuIH1cCi8vICAgICAgICAgICAgICAgICAgICAgOy0tLi4tLS5ffH0KLy8gIChcICAgICAgICAgICAgICAgICAnLS0vXC0tJyAgKQovLyAgIFxcICAgICAgICAgICAgICAgIHwgJy0nICA6J3wKLy8gICAgXFwgICAgICAgICAgICAgICAuIC09PS0gLi18Ci8vICAgICBcXCAgICAgICAgICAgICAgIFwuX18uJyAgIFwtLS5fCi8vICAgICBbXFwgICAgICAgICAgX18uLS18ICAgICAgIC8vICBfLyctLS4KLy8gICAgIFwgXFwgICAgICAgLictLl8gKCctLS0tLScvIF9fLyAgICAgIFwKLy8gICAgICBcIFxcICAgICAvICAgX18mZ3Q7fCAgICAgIHwgJy0tLiAgICAgICB8Ci8vICAgICAgIFwgXFwgICB8ICAgXCAgIHwgICAgIC8gICAgLyAgICAgICAvCi8vICAgICAgICBcICdcIC8gICAgIFwgIHwgICAgIHwgIF8vICAgICAgIC8KLy8gICAgICAgICBcICBcICAgICAgIFwgfCAgICAgfCAvICAgICAgICAvCi8vICAgc25kICAgIFwgIFwgICAgICBcICAgICAgICAvCnR5cGUgVGVybWluYXRvciBzdHJ1Y3R7fQoKLy8gU2ltcGx5IHJldHVybiBwcm92aWRlZCBDb250ZXh0IGFuZCBuaWwgZXJyb3IKZnVuYyAodCBUZXJtaW5hdG9yKSBBbnRlSGFuZGxlKGN0eCBDb250ZXh0LCBfIFR4LCBfIGJvb2wsIF8gQW50ZUhhbmRsZXIpIChDb250ZXh0LCBlcnJvcikgewoJcmV0dXJuIGN0eCwgbmlsCn0K"}})],1),e._v(" "),c("p",[e._v("Let us break it down:")]),e._v(" "),c("ul",[c("li",[e._v("The "),c("RouterLink",{attrs:{to:"/building-modules/messages-and-queries.html#messages"}},[c("code",[e._v("Msg")])]),e._v(" is the actual object being processed.")],1),e._v(" "),c("li",[e._v("The "),c("RouterLink",{attrs:{to:"/core/context.html"}},[c("code",[e._v("Context")])]),e._v(" contains all the necessary information needed to process the "),c("code",[e._v("msg")]),e._v(", as well as a branch of the latest state. If the "),c("code",[e._v("msg")]),e._v(" is successfully processed, the branched version of the state contained in the "),c("code",[e._v("ctx")]),e._v(" will be written to the main state (branch).")],1),e._v(" "),c("li",[e._v("The ["),c("code",[e._v("*Result")]),e._v("] returned to "),c("code",[e._v("BaseApp")]),e._v(" contains (among other things) information on the execution of the "),c("code",[e._v("handler")]),e._v(" and "),c("RouterLink",{attrs:{to:"/core/events.html"}},[e._v("events")]),e._v(".")],1)]),e._v(" "),c("p",[e._v("Module "),c("code",[e._v("handler")]),e._v("s are typically implemented in a "),c("code",[e._v("./handler.go")]),e._v(" file inside the module's folder. The "),c("RouterLink",{attrs:{to:"/building-modules/module-manager.html"}},[e._v("module manager")]),e._v(" is used to add the module's "),c("code",[e._v("handler")]),e._v("s to the\n"),c("RouterLink",{attrs:{to:"/core/baseapp.html#message-routing"}},[e._v("application's "),c("code",[e._v("router")])]),e._v(" via the "),c("code",[e._v("Route()")]),e._v(" method. Typically,\nthe manager's "),c("code",[e._v("Route()")]),e._v(" method simply constructs a Route that calls a "),c("code",[e._v("NewHandler()")]),e._v(" method defined in "),c("code",[e._v("handler.go")]),e._v(".")],1),e._v(" "),c("p",[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gUm91dGUgcmV0dXJucyB0aGUgbWVzc2FnZSByb3V0aW5nIGtleSBmb3IgdGhlIGdvdiBtb2R1bGUuCmZ1bmMgKGFtIEFwcE1vZHVsZSkgUm91dGUoKSBzZGsuUm91dGUgewoJcmV0dXJuIHNkay5OZXdSb3V0ZSh0eXBlcy5Sb3V0ZXJLZXksIE5ld0hhbmRsZXIoYW0ua2VlcGVyKSkKfQ=="}})],1),e._v(" "),c("h3",{attrs:{id:"implementation"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[e._v("#")]),e._v(" Implementation")]),e._v(" "),c("p",[c("code",[e._v("NewHandler")]),e._v(" function dispatches a "),c("code",[e._v("Msg")]),e._v(" to appropriate handler function, usually by using a switch statement:")]),e._v(" "),c("p",[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gTmV3SGFuZGxlciByZXR1cm5zIGEgaGFuZGxlciBmb3IgJnF1b3Q7YmFuayZxdW90OyB0eXBlIG1lc3NhZ2VzLgpmdW5jIE5ld0hhbmRsZXIoayBrZWVwZXIuS2VlcGVyKSBzZGsuSGFuZGxlciB7CglyZXR1cm4gZnVuYyhjdHggc2RrLkNvbnRleHQsIG1zZyBzZGsuTXNnKSAoKnNkay5SZXN1bHQsIGVycm9yKSB7CgkJY3R4ID0gY3R4LldpdGhFdmVudE1hbmFnZXIoc2RrLk5ld0V2ZW50TWFuYWdlcigpKQoKCQlzd2l0Y2ggbXNnIDo9IG1zZy4odHlwZSkgewoJCWNhc2UgKnR5cGVzLk1zZ1NlbmQ6CgkJCXJldHVybiBoYW5kbGVNc2dTZW5kKGN0eCwgaywgbXNnKQoKCQljYXNlICp0eXBlcy5Nc2dNdWx0aVNlbmQ6CgkJCXJldHVybiBoYW5kbGVNc2dNdWx0aVNlbmQoY3R4LCBrLCBtc2cpCgoJCWRlZmF1bHQ6CgkJCXJldHVybiBuaWwsIHNka2Vycm9ycy5XcmFwZihzZGtlcnJvcnMuRXJyVW5rbm93blJlcXVlc3QsICZxdW90O3VucmVjb2duaXplZCBiYW5rIG1lc3NhZ2UgdHlwZTogJVQmcXVvdDssIG1zZykKCQl9Cgl9Cn0="}})],1),e._v(" "),c("p",[e._v("First, "),c("code",[e._v("NewHandler")]),e._v(" function sets a new "),c("code",[e._v("EventManager")]),e._v(" to the context to isolate events per "),c("code",[e._v("msg")]),e._v(".\nThen, a simple switch calls the appropriate "),c("code",[e._v("handler")]),e._v(" based on the "),c("code",[e._v("Msg")]),e._v(" type.")]),e._v(" "),c("p",[e._v("In this regard, "),c("code",[e._v("handler")]),e._v("s functions need to be implemented for each module "),c("code",[e._v("Msg")]),e._v(". This will also involve manual handler registration of "),c("code",[e._v("Msg")]),e._v(" types.\n"),c("code",[e._v("handler")]),e._v("s functions should return a "),c("code",[e._v("*Result")]),e._v(" and an "),c("code",[e._v("error")]),e._v(".")]),e._v(" "),c("h2",{attrs:{id:"telemetry"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#telemetry"}},[e._v("#")]),e._v(" Telemetry")]),e._v(" "),c("p",[e._v("New "),c("RouterLink",{attrs:{to:"/core/telemetry.html"}},[e._v("telemetry metrics")]),e._v(" can be created from "),c("code",[e._v("msgServer")]),e._v(" methods when handling messages.")],1),e._v(" "),c("p",[e._v("This is an example from the "),c("code",[e._v("x/auth/vesting")]),e._v(" module:")]),e._v(" "),c("p",[c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"CWRlZmVyIGZ1bmMoKSB7CgkJdGVsZW1ldHJ5LkluY3JDb3VudGVyKDEsICZxdW90O25ldyZxdW90OywgJnF1b3Q7YWNjb3VudCZxdW90OykKCgkJZm9yIF8sIGEgOj0gcmFuZ2UgbXNnLkFtb3VudCB7CgkJCWlmIGEuQW1vdW50LklzSW50NjQoKSB7CgkJCQl0ZWxlbWV0cnkuU2V0R2F1Z2VXaXRoTGFiZWxzKAoJCQkJCVtdc3RyaW5neyZxdW90O3R4JnF1b3Q7LCAmcXVvdDttc2cmcXVvdDssICZxdW90O2NyZWF0ZV92ZXN0aW5nX2FjY291bnQmcXVvdDt9LAoJCQkJCWZsb2F0MzIoYS5BbW91bnQuSW50NjQoKSksCgkJCQkJW11tZXRyaWNzLkxhYmVse3RlbGVtZXRyeS5OZXdMYWJlbCgmcXVvdDtkZW5vbSZxdW90OywgYS5EZW5vbSl9LAoJCQkJKQoJCQl9CgkJfQoJfSgp"}})],1),e._v(" "),c("h2",{attrs:{hide:"",id:"next"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#next"}},[e._v("#")]),e._v(" Next")]),e._v(" "),c("p",{attrs:{hide:""}},[e._v("Learn about "),c("RouterLink",{attrs:{to:"/building-modules/query-services.html"}},[e._v("query services")])],1)],1)}),[],!1,null,null,null);l.default=g.exports}}]);